---
title: "Senators"
format: html
execute:
  echo: false
  warning: false
  message: false
---

```{r}
library(gt)
library(dplyr)

# Read the CSV file
senators <- read.csv("files/csvs/senator_list.csv")

# Check if the role_profiles folder exists and has any files
profile_folder_has_files <- dir.exists("files/pdfs/role_profiles") && 
                           length(list.files("files/pdfs/role_profiles")) > 0

# Always add the Page column
senators$Page <- paste0("[Page](senator-pages/district_", senators$District, ".html)")

# Only add Profile column if the folder has files
if (profile_folder_has_files) {
  senators$Profile <- paste0("[View Profile](files/pdfs/role_profiles/district_",       senators$District, "_profile.pdf)")
}

# Build the fmt_markdown columns list dynamically
markdown_columns <- c("Page")  # Page is always there
if (profile_folder_has_files) {
  markdown_columns <- c(markdown_columns, "Profile")
}

# Create the table
senators %>%
  gt() %>%
  fmt_markdown(columns = all_of(markdown_columns)) %>%
  tab_header(
    title = "Senators",
    subtitle = "Click to view senator profile or activity"
  )
```